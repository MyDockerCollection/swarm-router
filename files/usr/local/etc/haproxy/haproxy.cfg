global
    lua-load /usr/local/etc/haproxy/swarm-router.lua
    maxconn 10000
    ulimit-n 20026
    stats timeout 30s
    log /dev/log local0 warning
    tune.ssl.default-dh-param 2048
    ssl-default-bind-options no-sslv3 no-tlsv10
    ssl-default-bind-ciphers ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:RSA+AESGCM:RSA+AES:!aNULL:!MD5:!DSS

defaults
    log global
    mode http
    option tcplog
    option clitcpka
    option dontlognull
    option forwardfor
    timeout client 60s
    timeout server 600s
    timeout connect 5s
    timeout queue 30s
    timeout http-request 5s
    timeout http-keep-alive 30s
    default-server init-addr last,libc,none

resolvers docker
    nameserver dns 127.0.0.11:53
    resolve_retries 7

listen stats
    bind *:1111
    stats enable
    stats show-desc swarm-router status
    stats uri /
